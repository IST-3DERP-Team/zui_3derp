<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" class="sapUiSizeCompact" xmlns:tnt="sap.tnt"
    xmlns:c="zui3derp.control" xmlns:t="sap.ui.table">
    <Panel expandable="true" expanded="false" width="80%" class="sapUiSmallMargin sapUiSizeCompact whiteBackground">
        <headerToolbar>
            <Toolbar height="3rem" style="Clear">
                <Label text="General Attributes"/>
            </Toolbar>
        </headerToolbar>

        <Toolbar height="3rem" style="Clear">
            <ToolbarSpacer />
            <Button type="Ghost" icon="sap-icon://save" text="Save" visible="{GenAttrEditModeModel>/editMode}" press="onSaveGeneralTable"/>
            <Button type="Ghost" icon="sap-icon://add" press="addLine" visible="{GenAttrEditModeModel>/editMode}">
                <customData>
                    <core:CustomData key="TableName" value="generalTable"/>
                </customData>
            </Button>
            <Button type="Ghost" icon="sap-icon://delete" press="onDeleteGeneralAttr" visible="{GenAttrEditModeModel>/editMode}">
                <customData>
                    <core:CustomData key="TableName" value="generalTable"/>
                </customData>
            </Button>
            <Button type="Ghost" icon="sap-icon://edit" text="Edit" press="setGeneralAttrEditMode" visible="{= ${GenAttrEditModeModel>/editMode} === true ? false : true }"/>
            <Button type="Ghost" icon="sap-icon://decline" text="Cancel" press="cancelGeneralAttrEdit" visible="{= ${GenAttrEditModeModel>/editMode} === true ? true : false }"/>
        </Toolbar>

        <MessageStrip id="GeneralAttrMessageStrip" text="" showIcon="true" showCloseButton="true" class="sapUiMediumMarginBottom" type="Error" visible="false"/>
        
        <c:DynamicTable id="generalTable" rows="{DataModel>/results}" enableColumnReordering="false" minAutoRowCount="10" visibleRowCountMode="Auto" class="sapUiSizeCompact"
            selectionMode="{= ${GenAttrEditModeModel>/editMode} === true ? 'MultiToggle' : 'None' }">
            <c:columns>
                <t:Column width="11rem" filterProperty="Attribtyp">
                    <Label text="Attribute Type" />
                    <t:template>
                        <Input id="AttrTypesInput" type="Text" showSuggestion="true" showValueHelp="true" editable="{GenAttrEditModeModel>/editMode}" 
                            change="onGeneralAttrChange" liveChange="onGeneralAttrChange"
                            valueHelpRequest="onAttrTypesValueHelp" suggestionItems="{AttribTypeModel>/results}" value="{DataModel>Attribtyp}">
                            <suggestionItems>
                                <core:ListItem text="{AttribTypeModel>Attribtyp}" additionalText="{AttribTypeModel>Desc1}"/>
                            </suggestionItems>
                        </Input>
                    </t:template>
                </t:Column>
                <t:Column width="11rem" filterProperty="Attribcd">
                    <Label text="Attribute Code" />
                    <t:template>
                        <Input id="AttrCodesInput" type="Text" showSuggestion="true" showValueHelp="true" editable="{GenAttrEditModeModel>/editMode}" 
                            change="onGeneralAttrChange" liveChange="onGeneralAttrChange"
                            valueHelpRequest="onAttrCodesValueHelp" suggestionItems="{AttribCdModel>/results}" value="{DataModel>Attribcd}">
                            <suggestionItems>
                                <core:ListItem text="{AttribCdModel>Attribcd}" additionalText="{AttribCdModel>Desc1}"/>
                            </suggestionItems>
                        </Input>
                    </t:template>
                </t:Column>
                <t:Column name="DESC1" width="16rem" filterProperty="Desc1">
                    <Label text="Description" />
                    <t:template>
                        <Text id="AttrCodeDesc" text="{DataModel>Desc1}"/>
                    </t:template>
                </t:Column>
                <t:Column width="11rem" filterProperty="Attribval">
                    <Label text="Value" />
                    <t:template>
                        <Input id="AttribValInput" type="Text" editable="{GenAttrEditModeModel>/editMode}" value="{DataModel>Attribval}" 
                            change="onGeneralAttrChange" liveChange="onGeneralAttrChange"></Input>
                    </t:template>
                </t:Column>
                <t:Column name="UOM" width="5rem" filterProperty="Valunit">
                    <Label text="UOM" />
                    <t:template>
                        <Text id="AttrValunit" text="{DataModel>Valunit}"/>
                    </t:template>
                </t:Column>
            </c:columns>
        </c:DynamicTable>
    </Panel>
</core:FragmentDefinition>